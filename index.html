<!doctype html>
<html lang="en">

<head>
    <link rel="stylesheet" href="./libs/v6.5.0/css/ol.css" type="text/css">
    <link rel="stylesheet" href="./libs/v6.5.0/examples/resources/layout.css" type="text/css">
    <link rel="stylesheet" href="./libs/ol-layerswitcher/dist/ol-layerswitcher.css">
    <link rel="stylesheet" type="text/css" href="./css/leaflet.draw.css" />
    <link rel="stylesheet" type="text/css" href="./css/popup.css" />
    <link rel="stylesheet" type="text/css" href="./css/nouislider.css" />
    <script src="./libs/v6.5.0/build/ol.js"></script>
    <script src="./libs/ol-layerswitcher/dist/ol-layerswitcher.js"></script>
    <script src="./libs/jquery.min.js"></script>
    <script src="./js/nouislider.js"></script>
    <link rel="stylesheet" href="./libs/bootstrap.min.css"integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="./libs/bootstrap.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./css/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="crossorigin="">
    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="crossorigin=""></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="crossorigin=""></script>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.22.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gauge.js/1.3.6/gauge.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>
    


    <style>
        html,
        body {
            height: 100%;
            padding: 0;
            margin: 0;
            font-family: arial;
            background-color: rgb(232, 232, 232);
        }

        select,
        input {
            border: 2px solid #18456b;
            padding: 2px;
            margin: 5px;
            margin-left: 25px;
            background-color: aliceblue;
        }

        .btn {
            padding: 5px;
            border-radius: 5px;
            margin: 5px;
        }

            .btn:hover {
                background-color: black;
                color: white;
                border: 2px solid white;
            }

        #map {
            position: absolute;
            bottom: 0px;
            left: 40%;
            width: 59.75%;
            height: 93%;
            border: 1px solid #4CAF50;
            /* margin-left: 80px; */
            z-index: 55;
        }

        #content {
            position: absolute;
            bottom: 0px;
            left: 0%;
            width: 40%;
            height: 93%;
            border: 1px solid #4CAF50;
            /* margin-left: 80px; */
        }

        #left {
            /* width: 25%; */
            left: 50px;
            top: 0%;
        }

        #wms_layers_btn {
            position: absolute;
            z-index: 500;
            top: 5px;
            left: 60%;
        }

        #data {
            width: 60%;
        }


        #showData {
            overflow: auto;
            width: 100%;
        }


        .form-control {
            position: relative;
            top: 0px;
            width: 60%;
            border-radius: 5px;
        }
        .filter-prop {
            position: absolute;
            right: 0px;
            width: 95%;
            border-radius: 5px;
        }

        .ol-mouse-position {
            top: 97%;
            right: 20%;
            position: absolute;
            font-weight: bold;
        }

        .layer-switcher.shown {
            max-height: 465px;
        }

        #legend {
            z-index: 11;
            padding: 2px 2px 2px 2px;
            border: 1px solid grey;
            position: absolute;
            bottom: 37%;
            height: 34%;
            width: 96%;
            left: 6px;
            background-color: #ffffff;
            font-weight: bold;
        }

        #legend_1 {
            z-index: 11;
            padding: 2px 4px;
            border: 1px solid grey;
            position: absolute;
            bottom: 0.4%;
            height: 35%;
            width: 96%;
            left: 6px;
            background-color: #ffffff;
            font-weight: bold;
        }


        #getinfo {
            position: absolute;
            z-index: 50;
            top: 5px;
            height: 15px;
            left: 35%;
        }

        #popup {
            z-index: 100;
        }


        .btn_pop {
            border-radius: 2px;
            cursor: pointer;
            background-color: #337ab7;
            border-color: #2e6da4;
            padding: 10px;
            margin: 4px;
            color: white;
        }

            .btn_pop:hover {
                border-color: black;
                background-color: rgb(247, 220, 220);
                color: black;
            }

        .ul-listrm {
            list-style-type: none;
            padding-left: 0;
            padding-right: 10px;
        }
    </style>
    <style>
        button.btn-settings {
            margin: 25px;
            padding: 20px 30px;
            font-size: 1.2em;
            background-color: #337ab7;
            color: white;
        }

            button.btn-settings:active {
                color: white;
            }

        .modal {
            overflow: hidden;
        }

        .modal-dialog {
            height: 300px;
        }

        .modal-header {
            height: 30px;
            padding: 20px;
            background-color: #18456b;
            color: white;
        }

        .modal-title {
            margin-top: -10px;
            font-size: 16px;
        }

        .modal-header .close {
            margin-top: -10px;
            color: #fff;
        }

        .modal-body {
            color: #888;
            padding: 5px 35px 20px;
        }

            .modal-body h3 {
                text-align: center;
            }

            .modal-body p {
                padding-top: 10px;
                font-size: 1.1em;
            }


        table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }

        th {
            border: 1px solid #18456b;
            text-align: center;
            padding: 6px;
        }

        td {
            border: 1px solid #18456b;
            text-align: center;
            padding: 6px;
            font-size: small;
        }

        tr:nth-child(even) {
            background-color: #dddddd;
        }

        td {
            border: 1px solid #18456b;
            text-align: center;
            padding: 6px;
            font-size: small;
        }
        
        #gauge {
            top: 300px;
            right: -10px;
            position: absolute;
            z-index: 5000;
        }
        #filters {
            position: absolute;
            z-index: 1000;
            background: rgba(255,255,255,0.7);
            padding: 30px;
            right: 0;
            top: 6%;
            margin: 10px;
            
            border-radius: 10px;
            box-shadow: 3px 3px 3px grey;
            min-height: 350px;
            width: 200px;
        }
        .toastClass{
            top: 270px;
            right: 80px;
            position: absolute;
            z-index: 5000;
        }
        #leaflet-slider {
            margin-left: 10px;
            margin-right: 10px;
        }
        
        .nav-fix{
            top: 0px;
            position: fixed;
        }   
    </style>  

    <!--    SCRIPT FOR REQUEST   -->
    <script type="text/javascript">
        var request = false;
        var starttime = null;

        try {
            request = new XMLHttpRequest();
        } catch (trymicrosoft) {
            try {
                request = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (othermicrosoft) {
                try {
                    request = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (failed) {
                    request = false;
                    alert('Sorry, your browser does not support this application!')
                }
            }
        }

        function processRequest() {
            if (!request) { return; }
            var url = 'https://sdf.ndbc.noaa.gov/sos/server.php';
            document.getElementById('results').value = "Waiting for server response...";
            var params = document.getElementById('POSTDATA').value;
            request.onreadystatechange = checkResponse;
            request.open("POST", url, true);
            request.setRequestHeader("Content-type", "text/xml");
            request.setRequestHeader("Content-length", params.length);
            request.setRequestHeader("Connection", "close");
            starttime = new Date();
            request.send(params);
            return;
        }

        function checkResponse() {
            if (request.readyState == 4) {
                var endtime = new Date();
                var r = document.getElementById('results');
                var rt = document.getElementById('responsetime');
                if (rt) {
                    rt.innerHTML = 'Response Time: ' + ((endtime - starttime) / 1000) + ' seconds';
                }
                if (r) {
                    if (request.status == 200 || request.status == 304) {
                        r.value = request.responseText.replace(/\<br\s*\/?\>/g, '');
                    } else {
                        r.value = 'Error accessing server: ' + request.status + ' - ' + request.statusText;
                    }
                }
            }
        }

        function insertXMLRequest(xmltype) {
            var pd = document.getElementById('POSTDATA');
            if (pd) {
                switch (xmltype) {
                    case 'gc':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<GetCapabilities xmlns="http://www.opengis.net/ows/1.1" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/ows/1.1 fragmentGetCapabilitiesRequest.xsd" service="SOS">\n\
                              <AcceptVersions>\n\
                                <Version>1.0.0<\/Version>\n\
                              <\/AcceptVersions>\n\
                              <Sections>\n\
                                <Section>ServiceProvider<\/Section>\n\
                                <Section>ServiceIdentification<\/Section>\n\
                                <Section>Contents<\/Section>\n\
                              <\/Sections>\n\
                              <AcceptFormats>\n\
                                <OutputFormat>text/xml<\/OutputFormat>\n\
                              <\/AcceptFormats>\n\
<\/GetCapabilities>';
                        break;
                    case 'ds':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<DescribeSensor xmlns="http://www.opengis.net/sos/1.0"\n\
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n\
xmlns:sos="http://www.opengis.net/sos/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
service="SOS" outputFormat="text/xml;subtype=&quot;sensorML/1.0.1&quot;" version="1.0.0">\n\
                              <procedure>urn:ioos:sensor:wmo:42001::anemometer1<\/procedure>\n\
<\/DescribeSensor>';
                        break;
                    case 'go_airtemperature_1':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                              <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                              <sos:eventTime>\n\
                                <ogc:TM_Equals>\n\
                                  <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                                  <gml:TimeInstant>\n\
                                    <gml:timePosition>2012-11-01T00:50:00Z<\/gml:timePosition>\n\
                                  <\/gml:TimeInstant>\n\
                                <\/ogc:TM_Equals>\n\
                              <\/sos:eventTime>\n\
                              <sos:observedProperty>air_temperature<\/sos:observedProperty>\n\
                              <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                              <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                              <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_airtemperature_series':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                              <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                              <sos:eventTime>\n\
                                <ogc:TM_During>\n\
                                  <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                                  <gml:TimePeriod>\n\
                                    <gml:beginPosition>2012-11-01T00:00:00Z<\/gml:beginPosition>\n\
                                    <gml:endPosition>2012-11-02T00:00:00Z<\/gml:endPosition>\n\
                                  <\/gml:TimePeriod>\n\
                                <\/ogc:TM_During>\n\
                              <\/sos:eventTime>\n\
                              <sos:observedProperty>air_temperature<\/sos:observedProperty>\n\
                              <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                              <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                              <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_conductivity_1':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                              <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                              <sos:eventTime>\n\
                                <ogc:TM_Equals>\n\
                                  <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                                  <gml:TimeInstant>\n\
                                    <gml:timePosition>2012-07-01T01:50:00Z<\/gml:timePosition>\n\
                                  <\/gml:TimeInstant>\n\
                                <\/ogc:TM_Equals>\n\
                              <\/sos:eventTime>\n\
                              <sos:observedProperty>sea_water_electrical_conductivity<\/sos:observedProperty>\n\
                              <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                              <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                              <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_conductivity_series':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                              <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                              <sos:eventTime>\n\
                                <ogc:TM_During>\n\
                                  <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                                  <gml:TimePeriod>\n\
                                    <gml:beginPosition>2012-07-01T00:00:00Z<\/gml:beginPosition>\n\
                                    <gml:endPosition>2012-07-02T00:00:00Z<\/gml:endPosition>\n\
                                  <\/gml:TimePeriod>\n\
                                <\/ogc:TM_During>\n\
                              <\/sos:eventTime>\n\
                              <sos:observedProperty>sea_water_electrical_conductivity<\/sos:observedProperty>\n\
                              <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                              <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                              <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_currents_1':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_Equals>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimeInstant>\n\
                                <gml:timePosition>2012-11-01T00:50:00Z<\/gml:timePosition>\n\
                               <\/gml:TimeInstant>\n\
                              <\/ogc:TM_Equals>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>currents<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_currents_series':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_During>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimePeriod>\n\
                                <gml:beginPosition>2012-11-01T00:00:00Z<\/gml:beginPosition>\n\
                                <gml:endPosition>2012-11-02T00:00:00Z<\/gml:endPosition>\n\
                               <\/gml:TimePeriod>\n\
                              <\/ogc:TM_During>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>currents<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_pressure_1':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                              <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                              <sos:eventTime>\n\
                                <ogc:TM_Equals>\n\
                                  <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                                  <gml:TimeInstant>\n\
                                    <gml:timePosition>2012-11-01T00:50:00Z<\/gml:timePosition>\n\
                                  <\/gml:TimeInstant>\n\
                                <\/ogc:TM_Equals>\n\
                              <\/sos:eventTime>\n\
                              <sos:observedProperty>air_pressure_at_sea_level<\/sos:observedProperty>\n\
                              <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                              <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                              <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_pressure_series':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                              <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                              <sos:eventTime>\n\
                                <ogc:TM_During>\n\
                                  <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                                  <gml:TimePeriod>\n\
                                    <gml:beginPosition>2012-11-01T00:00:00Z<\/gml:beginPosition>\n\
                                    <gml:endPosition>2012-11-02T00:00:00Z<\/gml:endPosition>\n\
                                  <\/gml:TimePeriod>\n\
                                <\/ogc:TM_During>\n\
                              <\/sos:eventTime>\n\
                              <sos:observedProperty>air_pressure_at_sea_level<\/sos:observedProperty>\n\
                              <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                              <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                              <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_salinity_1':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_Equals>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimeInstant>\n\
                                <gml:timePosition>2012-07-01T00:50:00Z<\/gml:timePosition>\n\
                               <\/gml:TimeInstant>\n\
                              <\/ogc:TM_Equals>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>sea_water_salinity<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_salinity_series':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_During>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimePeriod>\n\
                                <gml:beginPosition>2012-07-01T00:00:00Z<\/gml:beginPosition>\n\
                                <gml:endPosition>2012-07-02T00:00:00Z<\/gml:endPosition>\n\
                               <\/gml:TimePeriod>\n\
                              <\/ogc:TM_During>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>sea_water_salinity<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_waterlevel_1':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:46403<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_Equals>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimeInstant>\n\
                                <gml:timePosition>2012-11-01T00:00:00Z<\/gml:timePosition>\n\
                               <\/gml:TimeInstant>\n\
                              <\/ogc:TM_Equals>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>sea_floor_depth_below_sea_surface<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_waterlevel_series':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:46403<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_During>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimePeriod>\n\
                                <gml:beginPosition>2012-11-01T00:00:00Z<\/gml:beginPosition>\n\
                                <gml:endPosition>2012-11-02T00:00:00Z<\/gml:endPosition>\n\
                               <\/gml:TimePeriod>\n\
                              <\/ogc:TM_During>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>sea_floor_depth_below_sea_surface<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_watertemperature_1':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_Equals>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimeInstant>\n\
                                <gml:timePosition>2012-11-01T00:50:00Z<\/gml:timePosition>\n\
                               <\/gml:TimeInstant>\n\
                              <\/ogc:TM_Equals>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>sea_water_temperature<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_watertemperature_series':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_During>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimePeriod>\n\
                                <gml:beginPosition>2012-11-01T00:00:00Z<\/gml:beginPosition>\n\
                                <gml:endPosition>2012-11-02T00:00:00Z<\/gml:endPosition>\n\
                               <\/gml:TimePeriod>\n\
                              <\/ogc:TM_During>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>sea_water_temperature<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_waves_1':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_Equals>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimeInstant>\n\
                                <gml:timePosition>2012-11-01T00:50:00Z<\/gml:timePosition>\n\
                               <\/gml:TimeInstant>\n\
                              <\/ogc:TM_Equals>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>waves<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_waves_series':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_During>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimePeriod>\n\
                                <gml:beginPosition>2012-11-01T00:00:00Z<\/gml:beginPosition>\n\
                                <gml:endPosition>2012-11-02T00:00:00Z<\/gml:endPosition>\n\
                               <\/gml:TimePeriod>\n\
                              <\/ogc:TM_During>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>waves<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_winds_1':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_Equals>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimeInstant>\n\
                                <gml:timePosition>2012-11-01T00:50:00Z<\/gml:timePosition>\n\
                               <\/gml:TimeInstant>\n\
                              <\/ogc:TM_Equals>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>winds<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    case 'go_winds_series':
                        pd.value = '<?xml version="1.0" encoding="UTF-8"?>\n\
<sos:GetObservation xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:om="http://www.opengis.net/om/1.0"\n\
xsi:schemaLocation="http://www.opengis.net/sos/1.0 http://schemas.opengis.net/sos/1.0.0/sosAll.xsd"\n\
xmlns:sos="http://www.opengis.net/sos/1.0" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml/3.2"\n\
service="SOS" version="1.0.0" srsName="EPSG:4326">\n\
                             <sos:offering>urn:ioos:station:wmo:41012<\/sos:offering>\n\
                             <sos:eventTime>\n\
                              <ogc:TM_During>\n\
                               <ogc:PropertyName>om:samplingTime<\/ogc:PropertyName>\n\
                               <gml:TimePeriod>\n\
                                <gml:beginPosition>2012-11-01T00:00:00Z<\/gml:beginPosition>\n\
                                <gml:endPosition>2012-11-02T00:00:00Z<\/gml:endPosition>\n\
                               <\/gml:TimePeriod>\n\
                              <\/ogc:TM_During>\n\
                             <\/sos:eventTime>\n\
                             <sos:observedProperty>winds<\/sos:observedProperty>\n\
                             <sos:responseFormat>text/xml;subtype="om/1.0.0"<\/sos:responseFormat>\n\
                             <sos:resultModel>om:Observation<\/sos:resultModel>\n\
                             <sos:responseMode>inline<\/sos:responseMode>\n\
<\/sos:GetObservation>';
                        break;
                    default:
                        pd.value = '';
                        break;
                }
            }
        }

    </script>
    <!--    END    -->


</head>

<body>
    
    <nav class="navbar navbar-inverse nav-fix" style=" width:100%; height: 47px; top: 0px">
        <div class="container-fluid" style="text-align:center;color:aqua;">
            <h1 style="margin-top: 8px; font-size: 25px;"> Sensor Observation Service &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h1>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </div>
    </nav>
    

    <div id="map">

    </div>

    <div id="popup" class="ol-popup">
        <a href="#" id="popup-closer" class="ol-popup-closer"></a>
        <div id="popup-content"></div>
    </div>
    

    <div id="content">
        <div class="tab-content">
            <form>
                <div id="form" class="tab-pane fade in active">


                    <div class="padDesign">
                        <label for="binding"><b>&nbsp; Select Operator:  &nbsp;</b></label>
                        <select class="form-control" id="binding" name="binding">
                            <option value="">Select operator</option>
                            <option value="1">NDBC</option>
                        </select>
                    </div>
                    
                    <div class="padDesign">
                        <label for="version"><b>&nbsp; Select Version: &nbsp; &nbsp;</b></label>
                        <select class="form-control" id="version" name="version">
                            <option value="1">1.0.0</option>
                            <option value="2">2.0.0</option>
                        </select>
                    </div>

                    <div class="padDesign">
                        <form action="javascript:void(0);" method="post">
                            <label for="operation"><b>&nbsp; Select Operation:</b></label>
                            <select class="form-control" id="operation" name="operation"
                                    onchange="insertXMLRequest(this.options[this.selectedIndex].value);this.blur();">
                                <option value="">Select XML Request</option>
                                <option value="gc">GetCapabilities</option>
                                <option value="ds">DescribeSensor</option>
                                <option value="go_airtemperature_1">GetObservation Air Temperature</option>
                                <option value="go_airtemperature_series">
                                    GetObservation Air Temperature (Time Series)
                                </option>
                                <option value="go_pressure_1">GetObservation Atmospheric Pressure</option>
                                <option value="go_pressure_series">
                                    GetObservation Atmospheric Pressure (Time Series)
                                </option>
                                <option value="go_conductivity_1">GetObservation Conductivity</option>
                                <option value="go_conductivity_series">GetObservation Conductivity (Time Series)</option>
                                <option value="go_currents_1">GetObservation Currents</option>
                                <option value="go_currents_series">GetObservation Currents (Time Series)</option>
                                <option value="go_salinity_1">GetObservation Salinity</option>
                                <option value="go_salinity_series">GetObservation Salinity (Time Series)</option>
                                <option value="go_waterlevel_1">GetObservation Water Level</option>
                                <option value="go_waterlevel_series">GetObservation Water Level (Time Series)</option>
                                <option value="go_watertemperature_1">GetObservation Water Temperature</option>
                                <option value="go_watertemperature_series">GetObservation Water Temperature (Time Series)</option>
                                <option value="go_waves_1">GetObservation Waves</option>
                                <option value="go_waves_series">GetObservation Waves (Time Series)</option>
                                <option value="go_winds_1">GetObservation Winds</option>
                                <option value="go_winds_series">GetObservation Winds (Time Series)</option>
                            </select>
                            <br>
                            
                        </form>
                    </div>

                    
                </div>
            </form>
        </div>
        <div>
            <button class="btn btn-success" onclick="processRequest();this.blur();">Load</button>
            <button class="btn btn-success" onclick="response();this.blur();">Submit</button>
        </div>

        <div id="left">
            <h3>&nbsp; Request</h3>
            <div id="legend">
                <textarea id="POSTDATA" name="POSTDATA" rows="14" cols="71" style="margin: 0px; width: 577px; height: 218px;"></textarea>
            </div>

            <h3>&nbsp; Data Table</h3>
            <div id="legend_1" style="overflow-x:auto;">
                <table>
                    <tr>
                        <th>Station ID</th>
                        <th>Sensor Type</th>
                        <th>Sensor Observations</th>
                    </tr>
                    
                    <tbody id="tableData">
                    </tbody>

                </table>

            </div>
        </div>
    </div>
    <div id="table_data"> </div>
    <!-- 16-5-21 -->
    <div id="wms_layers_window" title="Response" style="display:none">
        <form action="javascript:void(0);" method="get">
            <textarea id="results" name="results" rows="25" cols="96">
           </textarea>
        </form>
    </div>
    <!-- 16-5-21 end -->
    <table id="table_wms_layers" class="table-bordered">
    </table>
    <div id="filters">
        <h2 style="text-align:center">Filters</h2>

        <label for="SelectProp"><b>Select Properties: </b></label><br />
        <div class="padDesign">
            <select class="filter-prop" id="propSelect" name="selectProp">
                <option value="RESET" class="waves-effect waves-light" selected>All Properties</option>
                <option value="air_temperature" class="waves-effect waves-light">Air Temperature</option>
                <option value="air_pressure_at_sea_level" class="waves-effect waves-light">Air Pressure</option>
                <option value="sea_water_temperature" class="waves-effect waves-light">Sea Water Temperature</option>
                <option value="sea_water_salinity" class="waves-effect waves-light">Sea Water Salinity</option>
                <option value="currents">Currents</option>
                <option value="waves">Waves</option>
                <option value="winds">Winds</option>
                <option value="sea_floor_depth_below_sea_surface" class="waves-effect waves-light">Sea Floor Depth</option>
            </select>
        </div><br /><br />
        <label for="SelectProp"><b>Select Timeline: </b></label><br /><br />
        
        <div id="leaflet-slider">
        <div class="ui-slider-handle"></div>
        <div id="slider-timestamp" style="width:178px; margin-top:10px;background-color:#1c5587">
        </div>
        </div>
    </div>



    <script type="text/javascript">

        function response() {

            $(function () {

                $("#wms_layers_window").dialog({
                    height: 300,
                    width: 600,
                    modal: true,
                    
                });
                $("#wms_layers_window").show();

            });

        }


        /// SCRIPT FOR MAP WIDGETS ///

        var map
        const ndbc_sos = 'https://sdf.ndbc.noaa.gov/sos/server.php?request=GetCapabilities&service=SOS'
        const describeStationURL = 'https://sdf.ndbc.noaa.gov/sos/server.php?request=DescribeSensor&service=SOS&version=1.0.0&outputformat=text/xml;subtype=%22sensorML/1.0.1%22&procedure=urn:ioos:station:wmo:'
        const local_sos = 'https://'
        var GetCapabilitiesXML
        var markerJSON
        var stationCount
        var stationArray = [];

        var boundedStations = L.markerClusterGroup();
        var spatialGroup = L.markerClusterGroup();
        var temporalGroup = L.markerClusterGroup();
        var propGroup = L.markerClusterGroup();
        var gaugeOptions = {

            angle: 0.0,
            lineWidth: 0.44, 
            radiusScale: 1, 
            pointer: {
                length: 0.6, 
                strokeWidth: 0.035, 
                color: '#334455'
            },
            limitMax: false, 
            limitMin: false, 
            colorStart: '#334455', 
            colorStop: '#2be7fc', 
            strokeColor: '#334455', 
            generateGradient: true,
            highDpiSupport: true,
            staticLabels: {
                font: "10px sans-serif", 
                labels: [], 
                color: "#000000", 
                fractionDigits: 0 
            }
        };

        //// MARKER CLUSTTER GROUP  //////

        var stationGroups = L.markerClusterGroup({
            chunkedLoading: true,
            iconCreateFunction: function (cluster) {
                var markers = cluster.getAllChildMarkers();
                var c = ' marker-cluster-';
                var childCount = 0;
                for (var i = 0; i < markers.length; i++) {
                    if (markers[i].options.enabled) {
                        childCount++;
                    }
                }
                if (childCount < 10) {
                    c += 'small';
                } else if (childCount < 100) {
                    c += 'medium';
                } else {
                    c += 'large';
                }
                return new L.DivIcon({
                    html: '<div><span>' + childCount + '</span></div>',
                    className: 'marker-cluster' + c,
                    iconSize: new L.Point(40, 40)
                });
            }
        });

        ////// MARKER CLUSTER GROUP END ///////
       
        var minDate = '';
        var maxDate = '';

        ////// PRPERTIES //////

        const obsPropMap = {
            'sea_floor_depth_below_sea_surface': 'Sea Floor Depth',
            'air_pressure_at_sea_level': 'Air Pressure',
            'sea_water_temperature': 'Sea Water Temperature',
            'sea_water_salinity': 'Sea Water Salinity',
            'air_temperature': 'Air Temperature',
            'currents': 'Currents',
            'waves': 'Waves',
            'winds': 'Winds',
            'wind_speed': 'Wind Speed',
        };

        const subPropArray = [
            'sea_floor_depth_below_sea_surface',
            'air_pressure_at_sea_level',
            'sea_water_temperature',
            'sea_water_salinity',
            'air_temperature',
            'sea_water_speed',
            'sea_surface_wind_wave_significant_height',
            'wind_speed'
        ];

        const subPropRange = {
            'sea_floor_depth_below_sea_surface': [
                0, 11000, 'Meters'
            ],
            'air_pressure_at_sea_level': [
                337, 1100, 'hPa'
            ],
            'sea_water_temperature': [
                -2.6, 50, 'C'
            ],
            'sea_water_salinity': [
                31, 38, 'g/kg'
            ],
            'air_temperature': [
                -5, 50, 'C'
            ],
            'sea_water_speed': [
                0, 1500, 'm/s'
            ],
            'sea_surface_wind_wave_significant_height': [
                0, 20.1, 'Meters'
            ],
            'wind_speed': [0, 60, 'km/h']
        };

        const sensorTypeMap = {
            'tsunameter0': 'Tsunameter',
            'baro1': 'Barometer',
            'watertemp1': 'Water Temperature',
            'airtemp1': 'Air Temperature',
            'anemometer1': 'Anemometer',
            'anemometer2': 'Anemometer',
            'wpm1': 'WPM'
        };
        function isInArray(value, array) {
            return array.indexOf(value) > -1;
        };

        ////// MAP PART ///////

        var stationMarker
        var map = L.map('map').setView([20.5937, 78.9629], 5);

        var osm = new L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        });
        osm.addTo(map);

        //var redIcon = L.icon({
        //    iconUrl: './images/marker.png',

        //    iconSize: [50, 50], // size of the icon 
        //    iconAnchor: [28, 87], // point of the icon which will correspond to marker's location
        //    popupAnchor: [-3, -76] // point from which the popup should open relative to the iconAnchor
        //});
        //L.marker([20.5937, 78.9629], { icon: redIcon }).addTo(map)
        //     .bindPopup("<b>Hello world!</b><br />I am a popup.")

        map.on('popupclose', function (e) {
            
            gaugeTarget.html('');
        });


        //////// MAP PART ENDS ///////

        function getObservationURL(id, property) {
            // console.log(property)
            var temp = 'https://sdf.ndbc.noaa.gov/sos/server.php?request=GetObservation&service=SOS&version=1.0.0&offering=urn:ioos:station:wmo:' + id + '&observedproperty=' + property;
            return temp.toString();
        }

        function StringToXMLDom(string) {
            var xmlDoc = null;
            if (window.DOMParser) {
                parser = new DOMParser();
                xmlDoc = parser.parseFromString(string, "text/xml");
            } else {
                xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                xmlDoc.async = "false";
                xmlDoc.loadXML(string);
            }
            return xmlDoc;
        }

        function getProperties(observedProps) {
            var props = [];
            for (var i = 0; i < observedProps.length; i++) {
                propName = observedProps[i].outerHTML.split('/').slice(-2, -1)[0].split('"')[0]
                // console.log(propName);
                props.push(propName);
            }
            return props;
        }

        ////// POP UP CONTENT //////

        function describeStation(stationXML, stationID, propList, popup) {

            var popupContent = '<h1 style=\"display:inline;\" class="left-align"> StationID ' + stationID + '</h1>\n<ul class=\"collapsible ul-listrm\">\n'
            temp = ''
     
            for (var i = 0; i < propList.length; i = i + 1) {
                observationURL = getObservationURL(stationID, propList[i])

                temp = temp + '<li><div class=\"collapsible-header hoverable\" data-url=\"' + observationURL.toString() + '\"><img src=\'./images/' + propList[i] + '.png?raw=true\' width=\'30\' height=\'30\' align=\'left\'/><button class=\"btn btn_pop\"><span>' + obsPropMap[propList[i]] + '</span></button></div>'
            }
            popupContent = popupContent + temp + '</div>';
            popup.setContent(popupContent);
            popup.update();
            $('.collapsible').collapsible({
                accordion: true,
                onOpenStart: function (el) {
                    var obsURL = el.children[0].attributes[1].nodeValue + '&responseformat=text/xml;subtype="om/1.0.0"&eventtime=latest'.toString();
                    $.get(obsURL).done(function (data) {
                        
                        subProps = data.getElementsByTagName('swe:CompositePhenomenon')[0].children;
                        subPropVals = data.getElementsByTagName('swe2:DataStream')[0].children[2].innerHTML.split(',');
                        
                        temp = '';
                        var gaugeArray;
                        var displaySubProp;

                        for (var j = 1; j < subProps.length; j++) {
                            subProp = subProps[j].attributes[0].nodeValue.split('/').pop()
                            
                            if (subPropVals[j] != '') {
                                temp = temp + '<p>' + obsPropMap[subProp] + ' : ' + subPropVals[j] + '</p>';

                            }
                            if (isInArray(subProp, subPropArray)) {
                                gaugeArray = [
                                    subPropRange[subProp][0],
                                    parseFloat(subPropVals[j]),
                                    subPropRange[subProp][1]
                                ];
                                displaySubProp = obsPropMap[subProp];
                            }
                        }
                        
                        if (gaugeArray[1] == 0 || (!isNaN(gaugeArray[1]) && gaugeArray[1] != '')) {
                            
                            var toastHTML = '<div class="toastClass"><p style="color:black; font-weight: bold;"> ' + displaySubProp + '</p></div><div><canvas id="gauge"></canvas></div>';
                           
                            M.toast({ html: toastHTML, classes: 'rounded, white' });
                            var targetCanvas = document.getElementById('gauge');
                            gaugeOptions.staticLabels.labels = gaugeArray;
                            
                            var gauge = new Gauge(targetCanvas).setOptions(gaugeOptions); 
                            gauge.maxValue = gaugeArray[2]; // set max gauge value
                            gauge.setMinValue(gaugeArray[0]); // set min value
                            gauge.set(gaugeArray[1]); // set actual value
                        }
                        $('.collapsible-body').html('<span>' + temp + '</span>');
                    });
                },
                onCloseStart: function (el) {
                    $('.collapsible-body').html('');
                    var toastElement = document.querySelector('.toast');
                    if (toastElement != null) {
                        var toastInstance = M.Toast.getInstance(toastElement);
                        toastInstance.dismiss();
                    }
                }
            });
        }

        ////// POP UP CONTENT END ///////


        function refreshDisplay() {
            for (var i = 0; i < stationCount - 1; i++) {
                if (spatialGroup.hasLayer(stationArray[i].marker) && temporalGroup.hasLayer(stationArray[i].marker) && propGroup.hasLayer(stationArray[i].marker)) {
                    if (!stationGroups.hasLayer(stationArray[i].marker)) {
                        stationGroups.addLayer(stationArray[i].marker);
                    }
                } else {
                    if (stationGroups.hasLayer(stationArray[i].marker)) {
                        stationGroups.removeLayer(stationArray[i].marker);
                    }
                }
            }
            stationGroups.refreshClusters();

            
        };


        function highlightMarker(elem) {
            var selRowStnId = elem.children[0].innerHTML;
            var zoom = 5;
            for (i = 0; i < stationCount - 1; i++) {
                if (stationArray[i].marker.options.stationID == selRowStnId) {
                    var iconLatLng = [stationArray[i].marker.getLatLng()];
                    map.flyTo([iconLatLng[0].lat, iconLatLng[0].lng], zoom);
                    
                }
            }
        };

        function refreshChartTable() {
            var stnReading = [];
            var sensorId = []
            var stnId = []
            var traces = [];
            var analytics_url = 'https://sdf.ndbc.noaa.gov/sos/server.php?request=GetObservation&service=SOS&version=1.0.0'
            var selectedVal = $('#propSelect').val();
            if (selectedVal == 'RESET') {
                selectedVal = 'air_pressure_at_sea_level'
            }
            //// BoundedStations: Array to store the current number of stations visible on the map //////

            bounds = map.getBounds();
            stationGroups.eachLayer(function (layer) {
                if (bounds.contains(layer.getLatLng())) {
                    
                    boundedStations.addLayer(layer);
                } else {
                    boundedStations.removeLayer(layer);
                }
            });
            boundedStations.eachLayer(function (layer) {
                obs_url = analytics_url + '&offering=urn:ioos:station:wmo:' + layer.options.stationID + '&observedproperty=' + selectedVal + '&responseformat=text/xml;subtype=%22om/1.0.0%22&eventtime=latest'
                $('#tableData').html("");
                $.ajax({
                    url: obs_url,
                    datatype: 'text',
                    beforeSend: function () {
                        $('#propSelect').css('background');
                        $(".node_data_table").addClass('load');
                    },
                    success: function (result) {
                        temporalXML = StringToXMLDom(result);
                        var observationTag = result.getElementsByTagName('swe2:values')

                        if (typeof (observationTag[0]) != 'undefined') {
                            var currStnId = (observationTag[0].innerHTML.split(',')[0]).split('::')[0].split(':').pop();
                            var currSensorId = (observationTag[0].innerHTML.split(',')[0]).split('::')[1];
                            var sensorValues = observationTag[0].innerHTML.split(',')[1];
                            stnReading.push(sensorValues)

                            stnId.push(currStnId)
                            sensorId.push(currSensorId)
                            $('#tableData').append('<tr id=\'' + currStnId + '\' onclick=highlightMarker(this)><td>' + currStnId + '</td><td>' + sensorTypeMap[currSensorId] + '</td><td>' + sensorValues + '</td></tr>');

                        }
                    }
                });
            });


        };

        $('#propSelect').on('change', function () {
            refreshChartTable()
        });

        ///////  BOUNDING BOX ////////

        var bb;
        var drawnItems = new L.FeatureGroup();
        map.addLayer(drawnItems);
        var drawControl = new L.Control.Draw({
            draw: {
                rect: {
                    shapeOptions: {
                        color: 'green'
                    }
                },
                circle: false,
                polyline: false,
                polygon: false,
                marker: false
            },
            edit: {
                featureGroup: drawnItems,
                remove: false
            }
        });
        map.addControl(drawControl);
        map.on('draw:created', function (e) {
            var type = e.layerType,
                layer = e.layer;
            if (type === 'rectangle') {
                bb = layer.getLatLngs();
                var currBb = document.getElementById("bb");
                for (var i = 0; i < stationCount - 1; i++) {
                    latlong = [stationArray[i].marker.getLatLng()];
                    if (!(latlong[0].lat < bb[0][1].lat && latlong[0].lng > bb[0][1].lng && latlong[0].lat > bb[0][3].lat && latlong[0].lng < bb[0][3].lng)) {
                        spatialGroup.removeLayer(stationArray[i].marker);
                    } else {
                        spatialGroup.addLayer(stationArray[i].marker);
                    }
                }
                refreshDisplay();
                refreshChartTable();
            }
            drawnItems.addLayer(layer);
        });

        L.Control.RemoveAll = L.Control.extend({
            options: {
                position: 'topleft'
            },
            onAdd: function (map) {
                var controlDiv = L.DomUtil.create('div', 'leaflet-draw-toolbar leaflet-bar');
                L.DomEvent.addListener(controlDiv, 'click', L.DomEvent.stopPropagation).addListener(controlDiv, 'click', L.DomEvent.preventDefault).addListener(controlDiv, 'click', function () {
                    drawnItems.clearLayers();
                    for (var i = 0; i < stationCount - 1; i++) {
                        if (!spatialGroup.hasLayer(stationArray[i].marker)) {
                            spatialGroup.addLayer(stationArray[i].marker);
                        }
                    }
                    refreshDisplay();
                    refreshChartTable();
                });
                var controlUI = L.DomUtil.create('a', 'leaflet-draw-edit-remove', controlDiv);
                controlUI.title = 'Remove All Polygons';
                controlUI.href = '#';
                return controlDiv;
            }
        });
        var removeAllControl = new L.Control.RemoveAll();
        map.addControl(removeAllControl);

        ////// BOUNDING BOX ENDS ///////

        ///// TIMELINE ////////

        L.Control.TemporalControl = L.Control.extend({
            options: {
                position: 'topright',
                minDate: "",
                maxDate: "",
                layer: null,
                range: false,
                min: 0,
                max: 80
            },
            initialize: function (options) {
                L.Util.setOptions(this, options);
            },

            setPosition: function (position) {
                var map = this._map;

                if (map) {
                    map.removeControl(this);
                }

                this.options.position = position;

                if (map) {
                    map.addControl(this);
                }
                this.startSlider();
                return this;
            },

            onAdd: function (map) {
                var sliderContainer = L.DomUtil.create('div', 'slider', this._container);
                $(sliderContainer).append('');
                $(sliderContainer).mousedown(function () {
                    map.dragging.disable();
                });
                $(document).mouseup(function () {
                    map.dragging.enable();
                    $('#slider-timestamp').html('');
                });

                return sliderContainer;
            },

            onRemove: function (map) {
                for (var i = 0; i < stationCount - 1; i++) {
                    if (!temporalGroup.hasLayer(stationArray[i].marker)) {
                        temporalGroup.addLayer(stationArray[i].marker);
                    }
                }
                refreshDisplay();
                refreshChartTable();
                $('#leaflet-slider').remove();
            },

            startSlider: function () {
                _options = this.options;
                $("#leaflet-slider").slider({
                    range: _options.range,
                    values: [
                        0,
                        _options.maxDate.diff(_options.minDate, 'days')
                    ],
                    min: _options.min,
                    max: _options.max,
                    step: 1,
                    slide: function (e, ui) {
                        var low = ui.values[0];
                        var high = ui.values[1];
                        var dateValMin = moment(_options.minDate);
                        var dateValMax = moment(_options.maxDate);
                        var tempMin;
                        var tempMax;
                        if (ui.handleIndex) {
                            // console.log('2nd moving')
                            tempMin = moment(dateValMin);
                            tempMax = moment(dateValMax.subtract(_options.max - high, 'days'));
                        } else if ((!ui.handleIndex)) {
                            tempMin = moment(dateValMin.add(low, 'days'));
                            tempMax = moment(dateValMax);
                        }
                        $('#slider-timestamp').html('<blockquote>From ' + tempMin.format('LLLL') + ' To ' + tempMax.format('LLLL') + '</blockquote>');
                    },
                    stop: function (e, ui) {
                        var map = _options.map;
                        var low = ui.values[0];
                        var high = ui.values[1];
                        if (low == _options.min && high == _options.max) {
                            for (var i = 0; i < stationCount - 1; i++) {
                                if (!temporalGroup.hasLayer(stationArray[i].marker)) {
                                    temporalGroup.addLayer(stationArray[i].marker);
                                }
                            }
                            refreshDisplay();
                            refreshChartTable();
                        } else {
                            var dateValMin = moment(_options.minDate);
                            var dateValMax = moment(_options.maxDate);
                            var tempMin;
                            var tempMax;
                            if (low == _options.min) {
                                tempMin = moment(dateValMin);
                                tempMax = moment(dateValMax.subtract(_options.max - high, 'days'));
                            } else if (high == _options.max) {
                                tempMin = moment(dateValMin.add(low, 'days'));
                                tempMax = moment(dateValMax);
                            }
                            for (i = 0; i < stationCount - 1; i++) {
                                if (!(stationArray[i].marker.options.beginTime > tempMin && stationArray[i].marker.options.endTime < tempMax)) {
                                    // stationArray[i].marker.options.enabled = false;
                                    temporalGroup.removeLayer(stationArray[i].marker);
                                } else {
                                    temporalGroup.addLayer(stationArray[i].marker);
                                }
                            }
                            refreshDisplay();
                            refreshChartTable();
                        }
                    }
                });
            }

        });

        /////// TIMELINE ENDS //////

        /////// FILTERING //////////

        function propertyFiltering(prop) {
            if (prop != 'RESET') {
                for (i = 0; i < stationCount - 1; i++) {
                    if (!isInArray(prop, stationArray[i].marker.options.observedProps)) {
                        propGroup.removeLayer(stationArray[i].marker);
                    } else {
                        propGroup.addLayer(stationArray[i].marker);
                    }
                }
            } else {
                for (i = 0; i < stationCount - 1; i++) {
                    if (!propGroup.hasLayer(stationArray[i].marker))
                        propGroup.addLayer(stationArray[i].marker);
                }
            }
            refreshDisplay();
            refreshChartTable();
        };

       
        var gaugeTarget = $('#gauge'); 
        // Error Line
        // $('select').formSelect();
        $('#propSelect').on('change', function () {
            propertyFiltering($('#propSelect').val())
        });

        ////// FILTERING ENDS /////

        ////// XML PARSER /////

        $.ajax({
            url: ndbc_sos,
            dataType: 'text',
            success: function (result) {
               
                GetCapabilitiesXML = StringToXMLDom(result);

                var capabilities = GetCapabilitiesXML.getElementsByTagName('sos:Capabilities')[0]
                
                var observationOfferingList = capabilities.children[3].children[0].children;
                
                stationCount = observationOfferingList.length
                var stationCoordinates;
                var stationDetails;
                for (i = 1; i < stationCount; i++) {
                    var stationHTML = '<p>Station Description: ' + observationOfferingList[i].children[0].innerHTML + '</p>';
                    var stationID = observationOfferingList[i].children[1].innerHTML.split(':').pop()

                    stationHTML += '<p>StationID: ' + stationID + '</p>';
                    stationCoordinates = observationOfferingList[i].children[3].children[0].children[0].innerHTML.split(' ');

                    stationMarker = L.marker([
                        stationCoordinates[0], stationCoordinates[1]
                    ], {
                        stationID: stationID,
                        observedProps: getProperties(observationOfferingList[i].getElementsByTagName("sos:observedProperty")),
                        observedPropsXML: observationOfferingList[i].getElementsByTagName("sos:observedProperty"),
                        beginTime: moment(observationOfferingList[i].getElementsByTagName("gml:beginPosition")[0].innerHTML),
                        endTime: moment(observationOfferingList[i].getElementsByTagName("gml:endPosition")[0].innerHTML),
                        enabled: true
                    });

                    // console.log(moment(observationOfferingList[i].getElementsByTagName("gml:beginPosition")[0].innerHTML).subtract(1,'day'))
                    if (minDate == '' || moment(observationOfferingList[i].getElementsByTagName("gml:beginPosition")[0].innerHTML) < minDate)
                        minDate = moment(observationOfferingList[i].getElementsByTagName("gml:beginPosition")[0].innerHTML)
                    const popupHeading = '<p>Loading....</p><div class="progress"><div class="indeterminate"></div></div>'
                    stationMarker.bindPopup(popupHeading);
                    stationMarker.on('click', function (e) { 
                        var id = this.options.stationID;
                        var observedProps = this.options.observedProps
                        var popup = e.target.getPopup();
                        var stationData;
                        setTimeout(function () {
                            
                            $.get(describeStationURL + id).done(function (data) {
                                
                                describeStation(data, id, observedProps, popup);
                                
                            });
                        }, 150);
                    })
                    stationArray.push({ marker: stationMarker });
                    spatialGroup.addLayer(stationMarker);
                    temporalGroup.addLayer(stationMarker);
                    propGroup.addLayer(stationMarker);
                    
                }
                maxDate = moment();
                map.addLayer(stationGroups);

                L.control.temporalController = function (id, options) {
                    return new L.Control.TemporalControl(id, options);
                }
               
                var sliderControl = L.control.temporalController({
                    position: 'topright',
                    minDate: moment(minDate),
                    maxDate: moment(maxDate),
                    range: true,
                    min: 0,
                    max: maxDate.diff(minDate, 'days')
                });
                map.addControl(sliderControl);

                sliderControl.startSlider();
                refreshDisplay();
                refreshChartTable();
                map.on("moveend zoomend", refreshChartTable);
            },
            error: function (xhr, staus, error) {
                console.log('error in ajax', status, error);
            }
        });

        ///// MAP WIDGETS ENDS ///////

    </script>

</body>

</html>